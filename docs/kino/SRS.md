# Бизнес требования

Цель: обеспечить стабильные онлайн‑продажи билетов 24/7 и снизить нагрузку на кассы за счет самостоятельной покупки пользователями.

## Бизнес-правила и ограничения

- Соблюдать возрастной ценз. Например, билеты на фильмы 18+ могут приобретать только совершеннолетние.
- Конфигурации и количества залов у каждого кинотеатра свои.
- Омена покупки невозможна: за 10 минут до начала сеанса.
- Нельзя допускать продажи одних и тех же мест.
- Билет должен быть связан с Покупателем.

## Роли

Покупатель - любой желающий.
Система оплаты - внешний API для оплаты.
Сервис уведомлений - отправка SMS со ссылкой на билет.

# Пользовательские требования

- Поиск фильма по названию, времени, жанру.
- Информация о фильме и его расписание.
- План зала, свободные места и стоимость.
- Оплата билетов по безналичному расчету.
- Просмотр истории покупок
- Отмена покупки.

# Функциональные требования

- Предоставить информацию о фильме, кинотеатре, расписании, свободных местах и стоимости.
- Места, которые выбрал Покупатель, должны бронироваться. 
- Время бронирования мест: 10 минут.
- Забронированные места должны быть недоступны для покупки пока их не оплатят или не выйдет время таймера.
- Купленные места должны быть заблокированы для других Покупателей.
- По окончании времени, отведенного Покупателю, нужно обновить данные зала и начать отсчет заново.
- Время на оплату ограничено - 5 минут.
- Оплаченные билеты нельзя отменить за 10 минут до начала сеанса.
- Отправить билет (код билета) только после подтверждение оплаты банком.
- Подтверждения возраста, если есть ценз.
- Запоминаем Покупателя и его номер телефона.
- История покупок Покупателя. 
- Уведомления о покупке (SMS).

# Нефункциональные требовния

- Доступность должна быть на уровне 99,5% по времени бизнеса 9-21.
- Производительность: Поиск < 500ms p95, покупка <2сек с p95.
- Безопасность: PCI-DSS для платежей (не храним данные карты), защита PII для ПДн (шифрование телефона).
- Логируемость (поиск, резерв, покупка, выдача) и трассировка критических операций (сквозное отслеживание запроса).
- Система должна хранить данные Покупателя в соответствии с требованиями к ПДн.

# Ограничения

- Все платежи идут через внешнего провайдера.
- Схема зала фиксированная и не меняется часто.

# Диаграмма последовательности (Sequence-diagram)

# Контракты и интеграции

# Модель данных (ER-diagram)

# Телеметрия

