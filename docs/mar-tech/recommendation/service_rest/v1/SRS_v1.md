# REST API рекомендаций 1.0.0

**Версия:** 1.0.0 | **Дата:** 2025

---

**Проблема:** Пользователям нужны релевантные рекомендации конкурентов для добавления на дашборд.  
**Решение:** REST API с двумя стратегиями подбора.  
**Главный сценарий:** Клиент вызывает GET /account_recommendation (algo=PBUW или CATG) → получает список аккаунтов → виджет отображает; при пустом результате — виджет скрыт.

> Обзор: [README.md](README.md)

---

## 1. Область действия

API рекомендаций конкурентов для дашборда. Стратегии 1 (коллаборативная фильтрация) и 2 (по категории соцсети). 1.1.0 (МСБ, композит) — [../v2/README.md](../v2/README.md).

---

## 2. Сценарии использования

### UR-001. Общий список
Клиент запрашивает рекомендации без social/socialId (algo=PBUW или не передан) → стратегия 1 (коллаборативная фильтрация).

### UR-002. Дашборд аккаунта
Клиент передаёт social, socialId, algo=CATG → стратегия 2 (по категории соцсети).

---

## 3. Требования

### Функциональные (FR)
- FR-001 — Виджет для всех стратегий одинаковый
- FR-002 — При ошибке загрузки виджет скрывается
- FR-003 — Лоадер при загрузке
- FR-004 — Кнопка «Добавить на дашборд»
- FR-005 — Сообщение при невозможности добавления
- FR-006 — Скрытие уже добавленных аккаунтов
- FR-007 — Предупреждение при смене тарифа
- FR-008 — Смена тарифа перед добавлением (при подтверждении)
- FR-009 — Удаление из списка после добавления
- FR-010 — Фоновое обновление списка
- FR-011 — Скрытие виджета при пустом списке
- FR-012 — Сообщение о лимите (кнопка видима)
- FR-013 — Проверка тарифа перед добавлением

### Нефункциональные (NFR)
- NFR-001 — Ответ ≤ 1 сек
- NFR-002 — 401 → переадресация на вход

### Бизнес-правила (BR)
- BR-001 — Стратегия 1: коллаборативная фильтрация
- BR-002 — Стратегия 2: по категории соцсети
- BR-003 — Не показывать аккаунты пользователя
- BR-004 — Сортировка по подписчикам
- BR-005 — Пустой результат → виджет скрыт

### Ограничения (CON)
- CON-001 — limit 1–50, по умолчанию 10
- CON-002 — Бизнес-ошибки — понятные сообщения
- CON-003 — Пусто/ошибка → виджет не выводится

---

## 4. Контракты

- [openapi_v1.yaml](openapi_v1.yaml) — GET /api/v1/account_recommendation, algo (PBUW, CATG), social, socialId, limit, debug
- Добавление на дашборд — в сервисе main (POST /ajax/addWatch)

---

## Приложение. Глоссарий

| Термин | Определение |
|--------|-------------|
| **Аккаунт** | Профиль в соцсети |
| **Дашборд** | Рабочее пространство с аккаунтами |
| **Конкурент** | Похожий аккаунт |
| **Виджет** | Блок с рекомендациями и кнопкой «Добавить» |
| **Стратегия** | Алгоритм подбора (PBUW, CATG) |
